/**
 *	Console styles
 *
 *	A slightly less offensive version of https://github.com/Marak/colors.js
 */
var styleDefinitions = {
	bold: [1,22],
	italic: [3,23],
	underline: [4,24],
	inverse: [7,27],
	strikethough: [9,29],
	white: [37,39],
	black: [30,39],
	blue: [34,39],
	cyan: [36,39],
	green: [32,39],
	magenta: [35,39],
	red: [31,39],
	yellow: [33,39],
	whiteBG: [47,49],
	blackBG: [40,49],
	blueBG: [44,49],
	cyanBG: [46,49],
	greenBG: [42,49],
	magentaBG: [45,49],
	redBG: [41,49],
	yellowBG: [43,49]
};

function getStartStyle(name) {
	return styleDefinitions[name][0];
}

function getEndStyle(name) {
	return styleDefinitions[name][1];
}

function style( str, styles ) {
	return	'\u001b[' + styles.map(getStartStyle).join(';') + 'm' +
			str +
			'\u001b[' + styles.map(getEndStyle).join(';') + 'm';
}

function StyleConsole() {
	this.styles = [];
}

for ( var i in styleDefinitions ) {

	/* jshint -W083 */
	style[i] = StyleConsole.prototype[i] = function(name) {
		return function(str) {	
			if ( !(this instanceof StyleConsole) ) {
				return new StyleConsole()[name](str);
			}
			this.styles.push(name);
			if ( str != null ) {
				return style( String(str), this.styles );
			}
			return this;
		};
	}(i);
	/* jshint +W083 */

}

module.exports = style;